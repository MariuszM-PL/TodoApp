<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:vm="clr-namespace:TodoApp.ViewModels"
             x:Class="TodoApp.Views.SettingsPage"
             x:DataType="vm:SettingsViewModel"
             Title="Ustawienia"
             Shell.BackButtonBehavior="{BackButtonBehavior IsVisible=False}">

    <Grid BackgroundColor="{AppThemeBinding Light=#E3E8EE, Dark=#121212}">

        <ScrollView HorizontalScrollBarVisibility="Never" VerticalScrollBarVisibility="Default">

            <Grid Padding="15">

                <Border StrokeShape="RoundRectangle 20"
                        StrokeThickness="0"
                        Padding="25"
                        BackgroundColor="{AppThemeBinding Light=White, Dark=#1E1E1E}"
                        HorizontalOptions="Center"
                        VerticalOptions="Center"
                        MaximumWidthRequest="800">

                    <Border.Shadow>
                        <Shadow Brush="Black" Offset="0,5" Radius="10" Opacity="0.1"/>
                    </Border.Shadow>

                    <VerticalStackLayout Spacing="25">

                        <VerticalStackLayout Spacing="5">
                            <Label Text="Ustawienia" 
                                   FontSize="28" 
                                   FontAttributes="Bold" 
                                   HorizontalOptions="Center"
                                   TextColor="{DynamicResource Primary}"/>
                            <BoxView HeightRequest="1" Color="{AppThemeBinding Light=#E0E0E0, Dark=#333333}" Margin="0,5"/>
                        </VerticalStackLayout>

                        <VerticalStackLayout Spacing="10">
                            <Label Text="Wygląd aplikacji" TextColor="{DynamicResource Primary}" FontSize="16" FontAttributes="Bold" Margin="5,0,0,0"/>

                            <Border StrokeShape="RoundRectangle 12" StrokeThickness="1" Stroke="{AppThemeBinding Light=#E0E0E0, Dark=#333333}" Padding="15" BackgroundColor="{AppThemeBinding Light=#FAFAFA, Dark=#252525}">
                                <VerticalStackLayout Spacing="12">
                                    <RadioButton Content="Systemowy" Value="System" IsChecked="{Binding IsSystemTheme}">
                                        <RadioButton.GestureRecognizers>
                                            <TapGestureRecognizer Command="{Binding ChangeThemeCommand}" CommandParameter="System"/>
                                        </RadioButton.GestureRecognizers>
                                    </RadioButton>
                                    <RadioButton Content="Jasny" Value="Light" IsChecked="{Binding IsLightTheme}">
                                        <RadioButton.GestureRecognizers>
                                            <TapGestureRecognizer Command="{Binding ChangeThemeCommand}" CommandParameter="Light"/>
                                        </RadioButton.GestureRecognizers>
                                    </RadioButton>
                                    <RadioButton Content="Ciemny" Value="Dark" IsChecked="{Binding IsDarkTheme}">
                                        <RadioButton.GestureRecognizers>
                                            <TapGestureRecognizer Command="{Binding ChangeThemeCommand}" CommandParameter="Dark"/>
                                        </RadioButton.GestureRecognizers>
                                    </RadioButton>
                                </VerticalStackLayout>
                            </Border>
                        </VerticalStackLayout>

                        <VerticalStackLayout Spacing="10">
                            <Label Text="Zmiana hasła" TextColor="{DynamicResource Primary}" FontSize="16" FontAttributes="Bold" Margin="5,0,0,0"/>

                            <Border StrokeShape="RoundRectangle 12" StrokeThickness="1" Stroke="{AppThemeBinding Light=#E0E0E0, Dark=#333333}" Padding="15" BackgroundColor="{AppThemeBinding Light=#FAFAFA, Dark=#252525}">
                                <VerticalStackLayout Spacing="15">
                                    <Entry Placeholder="Nowe hasło" 
                                           Text="{Binding NewPassword}" 
                                           IsPassword="True" 
                                           HorizontalOptions="Fill"/>

                                    <Button Text="Zatwierdź zmianę" 
                                            Command="{Binding ChangePasswordCommand}" 
                                            CornerRadius="8"
                                            FontAttributes="Bold"/>
                                </VerticalStackLayout>
                            </Border>
                        </VerticalStackLayout>

                        <VerticalStackLayout Spacing="10">
                            <Label Text="Informacje o aplikacji" TextColor="{DynamicResource Primary}" FontSize="16" FontAttributes="Bold" Margin="5,0,0,0"/>

                            <Border StrokeShape="RoundRectangle 12" StrokeThickness="1" Stroke="{AppThemeBinding Light=#E0E0E0, Dark=#333333}" Padding="15" BackgroundColor="{AppThemeBinding Light=#FAFAFA, Dark=#252525}">
                                <VerticalStackLayout Spacing="12">
                                    <Grid ColumnDefinitions="Auto, *" RowDefinitions="Auto, Auto, Auto" RowSpacing="10" ColumnSpacing="15">
                                        <Label Grid.Row="0" Grid.Column="0" Text="Wersja:" FontAttributes="Bold" TextColor="Gray"/>
                                        <Label Grid.Row="0" Grid.Column="1" Text="{Binding AppVersion}" />

                                        <Label Grid.Row="1" Grid.Column="0" Text="Autorzy:" FontAttributes="Bold" TextColor="Gray"/>
                                        <Label Grid.Row="1" Grid.Column="1" Text="Mariusz Mikołajczyk, Patrycja Dorszyńska" LineBreakMode="WordWrap"/>

                                        <Label Grid.Row="2" Grid.Column="0" Text="Tech:" FontAttributes="Bold" TextColor="Gray"/>
                                        <Label Grid.Row="2" Grid.Column="1" Text=".NET MAUI (SQLite)" />
                                    </Grid>

                                    <BoxView HeightRequest="1" Color="{AppThemeBinding Light=#E0E0E0, Dark=#333333}" Margin="0,5" />

                                    <Label Text="Aplikacja do zarządzania zadaniami z lokalną bazą danych." 
                                           FontSize="12" 
                                           TextColor="Gray"
                                           HorizontalOptions="Center" 
                                           HorizontalTextAlignment="Center"/>
                                </VerticalStackLayout>
                            </Border>
                        </VerticalStackLayout>

                        <Button Text="Wróć do zadań" 
                                
                                Command="{Binding GoBackCommand}" 
                                Margin="0,10,0,0" 
                                HeightRequest="40"
                                CornerRadius="10"
                                FontAttributes="Bold"
                                BackgroundColor="Transparent" 
                                TextColor="{DynamicResource Primary}" 
                                BorderColor="{DynamicResource Primary}" 
                                />
                        

                    </VerticalStackLayout>
                </Border>
            </Grid>
        </ScrollView>
    </Grid>
</ContentPage>